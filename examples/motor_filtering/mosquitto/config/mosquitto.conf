# Mosquitto MQTT Broker Configuration for PyEdgeTwin Demo
#
# Note: Mosquitto 2.x starts in "local only mode" by default when using
# the default config. This config explicitly enables remote connections.
# See: https://github.com/eclipse/mosquitto/issues/2323

# =============================================================================
# Listener Configuration
# =============================================================================

# Listen on all interfaces (required for Docker networking)
listener 1883

# Allow anonymous connections (for development only!)
# In production, use username/password or client certificates
allow_anonymous true

# =============================================================================
# Persistence
# =============================================================================

persistence true
persistence_location /mosquitto/data/

# =============================================================================
# Logging
# =============================================================================

log_dest file /mosquitto/log/mosquitto.log
log_dest stdout

log_type error
log_type warning
log_type notice
log_type information

# Include connection/subscription events (useful for debugging)
connection_messages true
log_timestamp true

# =============================================================================
# Connection Settings
# =============================================================================

# No limit on connections (use -1 for unlimited)
max_connections -1

# Client keepalive
max_keepalive 300

# Message size limit (1MB)
message_size_limit 1048576
